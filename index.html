<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>xAPIWrapper 1.3.0 Reference</title>

        <link rel="stylesheet" href="static/bootstrap.min.css">
        <link rel="stylesheet" href="static/prism.css">

        <style type="text/css">

            .wrap {
                display: -webkit-flex;
                display: flex;
            }

            h1 {
                color: #FFF;
                background-color: #333;
                margin: 0 0 0.3em 0;
                padding: 5px;
                font-size: 20px;
            }

            nav {
                width: 200px;
            }

            .content {
                -webkit-flex: 1;
                flex: 1;
                max-width: 1000px;
            }

            section > .block {
                padding-left: 3em;
            }

            h3 {
                font-size: 28px;
                letter-spacing: 2px;
            }

            h3 em {
                letter-spacing: 0;
                color: #DDD;
            }

            pre code {
                font-family: Courier, monospace !important;
                font-weight: normal;
                color: #222222 !important;
            }

            pre[class*="language-"] {
                margin-top: 0;
                /*padding-top: 0;*/
            }

            nav ul {
                padding-left: 1em;
                list-style: none;
            }

            .nav ul ul a {
                padding: 0 10px;
            }

            .nav-tabs {
                margin-top: 1em;
            }

            .nav-tabs li a {
                padding: 4px 15px;
                font-weight: 700;
            }

            .nav-tabs li.active a {
                border-color: #ccc;
                border-bottom-color: transparent;
                background-color: #f5f2f0;
                color: #333;
            }
            .nav-tabs>li.active>a, .nav-tabs>li.active>a:hover, .nav-tabs>li.active>a:focus {
                background-color: #f5f2f0;
            }

            /*code,*/
            pre {
                /*background-color: #FFF !important;*/
                border-top: none;
                border-top-left-radius: 0;
                border-top-right-radius: 0;
            }

            .table {
                border: none;
                width: auto;
            }
            .table>tbody>tr>td,
            .table>thead>tr>th {
                border: none;
            }
            .table-condensed>thead>tr>th,
            .table-condensed>tbody>tr>td {
                padding: 3px 10px 3px 0;
            }
            section {
                margin: 0;
            }
        </style>

    </head>

    <body>

        <h1>xAPIWrapper 1.3.0 Reference</h1>

        <div class="wrap">

            <nav>
                <ul>
                    <li>
                        <a href="#xapistatement"><strong>XAPIstatement</strong></a>
                        <ul class="">
                                <li><a href="#xapistatement-XAPIStatement">XAPIStatement</a></li>
                                <li><a href="#xapistatement-Agent">Agent</a></li>
                                <li><a href="#xapistatement-Group">Group</a></li>
                                <li><a href="#xapistatement-Verb">Verb</a></li>
                                <li><a href="#xapistatement-Activity">Activity</a></li>
                                <li><a href="#xapistatement-StatementRef">StatementRef</a></li>
                                <li><a href="#xapistatement-SubStatement">SubStatement</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#xapiwrapper"><strong>XAPIwrapper</strong></a>
                        <ul class="">
                                <li><a href="#xapiwrapper-Config">Config</a></li>
                                <li><a href="#xapiwrapper-prepareStatement">prepareStatement</a></li>
                                <li><a href="#xapiwrapper-sendStatement">sendStatement</a></li>
                                <li><a href="#xapiwrapper-sendStatements">sendStatements</a></li>
                                <li><a href="#xapiwrapper-getStatements">getStatements</a></li>
                                <li><a href="#xapiwrapper-getActivities">getActivities</a></li>
                                <li><a href="#xapiwrapper-sendState">sendState</a></li>
                                <li><a href="#xapiwrapper-getState">getState</a></li>
                                <li><a href="#xapiwrapper-deleteState">deleteState</a></li>
                                <li><a href="#xapiwrapper-sendActivityProfile">sendActivityProfile</a></li>
                                <li><a href="#xapiwrapper-getActivityProfile">getActivityProfile</a></li>
                                <li><a href="#xapiwrapper-deleteActivityProfile">deleteActivityProfile</a></li>
                                <li><a href="#xapiwrapper-getAgents">getAgents</a></li>
                                <li><a href="#xapiwrapper-sendAgentProfile">sendAgentProfile</a></li>
                                <li><a href="#xapiwrapper-getAgentProfile">getAgentProfile</a></li>
                                <li><a href="#xapiwrapper-deleteAgentProfile">deleteAgentProfile</a></li>
                                <li><a href="#xapiwrapper-testConfig">testConfig</a></li>
                                <li><a href="#xapiwrapper-ie_request">ie_request</a></li>
                                <li><a href="#xapiwrapper-ruuid">ruuid</a></li>
                                <li><a href="#xapiwrapper-dateFromISOString">dateFromISOString</a></li>
                                <li><a href="#xapiwrapper-XHR_request">XHR_request</a></li>
                                <li><a href="#xapiwrapper-xhrRequestOnError">xhrRequestOnError</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>

            <div class="content">

                    <section id="xapistatement">

                        <h2>XAPIstatement</h2>


                            <section id="xapistatement-XAPIStatement">


                                <h3>
                                    XAPIStatement
                                    <em> (actor, verb, object)</em>
                                </h3>

                                <div class="block">

                                    <p>@function XAPIStatement</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>actor</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    The Agent or Group committing the action described by the statement
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>verb</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    The Verb for the action described by the statement
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>object</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    The receiver of the action. An Agent, Group, Activity, SubStatement, or StatementRef
                                                    
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#XAPIStatement-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#XAPIStatement-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="XAPIStatement-example-0">
                                            <pre><code class="language-javascript">var stmt = new ADL.XAPIStatement(
    &#x27;mailto:steve.vergenz.ctr@adlnet.gov&#x27;,
   &#x27;http://adlnet.gov/expapi/verbs/launched&#x27;,
   &#x27;http://vwf.adlnet.gov/xapi/virtual_world_sandbox&#x27;
);
&gt;&gt; {
    &quot;actor&quot;: {
        &quot;objectType&quot;: &quot;Agent&quot;,
        &quot;mbox&quot;: &quot;mailto:steve.vergenz.ctr@adlnet.gov&quot; },
    &quot;verb&quot;: {
        &quot;id&quot;: &quot;http://adlnet.gov/expapi/verbs/launched&quot; },
    &quot;object&quot;: {
        &quot;objectType&quot;: &quot;Activity&quot;,
        &quot;id&quot;: &quot;http://vwf.adlnet.gov/xapi/virtual_world_sandbox&quot; }}</code></pre>
                                        </div>
                                        <div class="tab-pane" id="XAPIStatement-source">
                                            <pre><code class="language-javascript">var XAPIStatement = function(actor,verb,object)
	{

		// initialize

		// if first arg is an xapi statement, parse
		if( actor &amp;&amp; actor.actor &amp;&amp; actor.verb &amp;&amp; actor.object ){
			var stmt = actor;
			for(var i in stmt){
				if(i != &#x27;actor&#x27; &amp;&amp; i != &#x27;verb&#x27; &amp;&amp; i != &#x27;object&#x27;)
					this[i] = stmt[i];
			}
			actor = stmt.actor;
			verb = stmt.verb;
			object = stmt.object;
		}
		
		if(actor){
			if( actor instanceof Agent )
				this.actor = actor;
			else if(actor.objectType === &#x27;Agent&#x27; || !actor.objectType)
				this.actor = new Agent(actor);
			else if(actor.objectType === &#x27;Group&#x27;)
				this.actor = new Group(actor);
		}
		else this.actor = null;
		
		if(verb){
			if( verb instanceof Verb )
				this.verb = verb;
			else
				this.verb = new Verb(verb);
		}
		else this.verb = null;

		// decide what kind of object was passed
		if(object)
		{
			if( object.objectType === &#x27;Activity&#x27; || !object.objectType ){
				if( object instanceof Activity )
					this.object = object;
				else
					this.object = new Activity(object);
			}
			else if( object.objectType === &#x27;Agent&#x27; ){
				if( object instanceof Agent )
					this.object = object;
				else
					this.object = new Agent(object);
			}
			else if( object.objectType === &#x27;Group&#x27; ){
				if( object instanceof Group )
					this.object = object;
				else
					this.object = new Group(object);
			}
			else if( object.objectType === &#x27;StatementRef&#x27; ){
				if( object instanceof StatementRef )
					this.object = object;
				else
					this.object = new StatementRef(object);
			}
			else if( object.objectType === &#x27;SubStatement&#x27; ){
				if( object instanceof SubStatement )
					this.object = object;
				else
					this.object = new SubStatement(object);
			}
			else this.object = null;
		}
		else this.object = null;


		this.generateId = function(){
			this.id = ADL.ruuid();
		};
	};

	XAPIStatement.prototype.toString = function(){
		return this.actor.toString() + &quot; &quot; + this.verb.toString() + &quot; &quot; + this.object.toString();
	};

	XAPIStatement.prototype.isValid = function(){
		return this.actor &amp;&amp; this.actor.isValid() 
			&amp;&amp; this.verb &amp;&amp; this.verb.isValid() 
			&amp;&amp; this.object &amp;&amp; this.object.isValid();
	};

	XAPIStatement.prototype.generateRegistration = function(){
		_getobj(this,&#x27;context&#x27;).registration = ADL.ruuid();
	};

	XAPIStatement.prototype.addParentActivity = function(activity){
		_getobj(this,&#x27;context.contextActivities.parent[]&#x27;).push(new Activity(activity));
	};

	XAPIStatement.prototype.addGroupingActivity = function(activity){
		_getobj(this,&#x27;context.contextActivities.grouping[]&#x27;).push(new Activity(activity));
	};

	XAPIStatement.prototype.addOtherContextActivity = function(activity){
		_getobj(this,&#x27;context.contextActivities.other[]&#x27;).push(new Activity(activity));
	};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapistatement-Agent">


                                <h3>
                                    Agent
                                    <em> (identifier, name)</em>
                                </h3>

                                <div class="block">

                                    <p>@function Agent</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>identifier</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    One of the Inverse Functional Identifiers specified in the spec.     That is, an email, a hashed email, an OpenID, or an account object.
    See (https://github.com/adlnet/xAPI-Spec/blob/master/xAPI.md#inversefunctional)
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>name</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    The natural-language name of the agent
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#Agent-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#Agent-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="Agent-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="Agent-source">
                                            <pre><code class="language-javascript">var Agent = function(identifier, name)
	{
		this.objectType = &#x27;Agent&#x27;;
		this.name = name;

		// figure out what type of identifier was given
		if( identifier &amp;&amp; (identifier.mbox || identifier.mbox_sha1sum || identifier.openid || identifier.account) ){
			for(var i in identifier){
				this[i] = identifier[i];
			}
		}
		else if( /^mailto:/.test(identifier) ){
			this.mbox = identifier;
		}
		else if( /^[0-9a-f]{40}$/i.test(identifier) ){
			this.mbox_sha1sum = identifier;
		}
		else if( /^http[s]?:/.test(identifier) ){
			this.openid = identifier;
		}
		else if( identifier &amp;&amp; identifier.homePage &amp;&amp; identifier.name ){
			this.account = identifier;
		}
	};
	Agent.prototype.toString = function(){
		return this.name || this.mbox || this.openid || this.mbox_sha1sum || this.account.name;
	};
	Agent.prototype.isValid = function()
	{
		return this.mbox || this.mbox_sha1sum || this.openid
	    || (this.account.homePage &amp;&amp; this.account.name)
	    || (this.objectType === &#x27;Group&#x27; &amp;&amp; this.member);
	};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapistatement-Group">


                                <h3>
                                    Group
                                    <em> (identifier, members, name)</em>
                                </h3>

                                <div class="block">

                                    <p>@founction Group</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>identifier</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    (optional if `members` specified) See Agent.
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>members</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    An array of Agents describing the membership of the group
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>name</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    The natural-language name of the agent
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#Group-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#Group-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="Group-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="Group-source">
                                            <pre><code class="language-javascript">var Group = function(identifier, members, name)
	{
		Agent.call(this, identifier, name);
		this.member = members;
		this.objectType = &#x27;Group&#x27;;
	};
	Group.prototype = new Agent;</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapistatement-Verb">


                                <h3>
                                    Verb
                                    <em> (id, description)</em>
                                </h3>

                                <div class="block">

                                    <p>@function Verb</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>id</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    The IRI of the action taken
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>description</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    An English-language description, or a Language Map
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#Verb-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#Verb-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="Verb-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="Verb-source">
                                            <pre><code class="language-javascript">var Verb = function(id, description)
	{
		// if passed a verb object then copy and return
		if( id &amp;&amp; id.id ){
			for(var i in id){
				this[i] = id[i];
			}
			return;
		}

		// save id and build language map
		this.id = id;
		if(description)
		{
			if( typeof(description) === &#x27;string&#x27; || description instanceof String ){
				this.display = {&#x27;en-US&#x27;: description};
			}
			else {
				this.display = description;
			}
		}
	};
	Verb.prototype.toString = function(){
		if(this.display &amp;&amp; (this.display[&#x27;en-US&#x27;] || this.display[&#x27;en&#x27;]))
			return this.display[&#x27;en-US&#x27;] || this.display[&#x27;en&#x27;];
		else
			return this.id;
	};
	Verb.prototype.isValid = function(){
		return this.id;
	};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapistatement-Activity">


                                <h3>
                                    Activity
                                    <em> (id, name, description)</em>
                                </h3>

                                <div class="block">

                                    <p>@function Activity</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>id</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    The unique activity IRI
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>name</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    An English-language identifier for the activity, or a Language Map
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>description</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    An English-language description of the activity, or a Language Map
                                                    
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#Activity-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#Activity-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="Activity-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="Activity-source">
                                            <pre><code class="language-javascript">var Activity = function(id, name, description)
	{
		// if first arg is activity, copy everything over
		if(id &amp;&amp; id.id){
			var act = id;
			for(var i in act){
				this[i] = act[i];
			}
			return;
		}
		
		this.objectType = &#x27;Activity&#x27;;
		this.id = id;
		if( name || description )
		{
			this.definition = {};
			
			if( typeof(name) === &#x27;string&#x27; || name instanceof String )
				this.definition.name = {&#x27;en-US&#x27;: name};
			else if(name)
				this.definition.name = name;
			
			if( typeof(description) === &#x27;string&#x27; || description instanceof String )
				this.definition.description = {&#x27;en-US&#x27;: description};
			else if(description)
				this.definition.description = description;
		}
	};
	Activity.prototype.toString = function(){
		if(this.definition &amp;&amp; this.definition.name &amp;&amp; (this.definition.name[&#x27;en-US&#x27;] || this.definition.name[&#x27;en&#x27;]))
			return this.definition.name[&#x27;en-US&#x27;] || this.definition.name[&#x27;en&#x27;];
		else
			return this.id;
	};
	Activity.prototype.isValid = function(){
		return this.id &amp;&amp; (!this.objectType || this.objectType === &#x27;Activity&#x27;);
	};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapistatement-StatementRef">


                                <h3>
                                    StatementRef
                                    <em> (id)</em>
                                </h3>

                                <div class="block">

                                    <p>@function StatementRef</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>id</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    The UUID of another xAPI statement
                                                    
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#StatementRef-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#StatementRef-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="StatementRef-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="StatementRef-source">
                                            <pre><code class="language-javascript">var StatementRef = function(id){
		if(id &amp;&amp; id.id){
			for(var i in id){
				this[i] = id[i];
			}
		}
		else {
			this.objectType = &#x27;StatementRef&#x27;;
			this.id = id;
		}
	};
	StatementRef.prototype.toString = function(){
		return &#x27;statement(&#x27;+this.id+&#x27;)&#x27;;
	};
	StatementRef.prototype.isValid = function(){
		return this.id &amp;&amp; this.objectType &amp;&amp; this.objectType === &#x27;StatementRef&#x27;;
	};</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapistatement-SubStatement">


                                <h3>
                                    SubStatement
                                    <em> (actor, verb, object)</em>
                                </h3>

                                <div class="block">

                                    <p>@function SubStatement</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>actor</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    The Agent or Group committing the action described by the statement
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>verb</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    The Verb for the action described by the statement
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>object</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    The receiver of the action. An Agent, Group, Activity, or StatementRef
                                                    
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#SubStatement-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#SubStatement-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="SubStatement-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="SubStatement-source">
                                            <pre><code class="language-javascript">var SubStatement = function(actor, verb, object){
		XAPIStatement.call(this,actor,verb,object);
		this.objectType = &#x27;SubStatement&#x27;;

		delete this.id;
		delete this.stored;
		delete this.version;
		delete this.authority;
	};
	SubStatement.prototype = new XAPIStatement;
	SubStatement.prototype.toString = function(){
		return &#x27;&quot;&#x27; + SubStatement.prototype.prototype.toString.call(this) + &#x27;&quot;&#x27;;
	};
	
	XAPIStatement.Agent = Agent;
	XAPIStatement.Group = Group;
	XAPIStatement.Verb = Verb;
	XAPIStatement.Activity = Activity;
	XAPIStatement.StatementRef = StatementRef;
	XAPIStatement.SubStatement = SubStatement;
	ADL.XAPIStatement = XAPIStatement;

}(window.ADL = window.ADL || {}));</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>
                    </section>
                    <section id="xapiwrapper">

                        <h2>XAPIwrapper</h2>



                            <section id="xapiwrapper-prepareStatement">


                                <h3>
                                    prepareStatement
                                    <em> (stmt)</em>
                                </h3>

                                <div class="block">

                                    <p>@function prepareStatement</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>stmt</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    the statement object
                                                    
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#prepareStatement-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#prepareStatement-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="prepareStatement-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="prepareStatement-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.prepareStatement = function(stmt)
    {
        if(stmt.actor === undefined){
            stmt.actor = JSON.parse(this.lrs.actor);
        }
        else if(typeof stmt.actor === &quot;string&quot;) {
            stmt.actor = JSON.parse(stmt.actor);
        }
        if (this.lrs.grouping || 
            this.lrs.registration || 
            this.lrs.activity_platform) {
            if (!stmt.context) {
                stmt.context = {};
            }
        }
        
        if (this.lrs.grouping) {
            if (!stmt.context.contextActivities) {
                stmt.context.contextActivities = {};
            }
            stmt.context.contextActivities.grouping = [{ id : this.lrs.grouping }];
        }
        if (this.lrs.registration) {
            stmt.context.registration = this.lrs.registration;
        }
        if (this.lrs.activity_platform) {
            stmt.context.platform = this.lrs.activity_platform;
        }
    };

    // tests the configuration of the lrs object
    XAPIWrapper.prototype.testConfig = testConfig;

    // writes to the console if available
    XAPIWrapper.prototype.log = log;</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-sendStatement">


                                <h3>
                                    sendStatement
                                    <em> (stmt, callback)</em>
                                </h3>

                                <div class="block">

                                    <p>@function sendStatement</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>stmt</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    statement object to send
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">function</span></td>
                                                <td>
                                                    function to be called after the LRS responds             to this request (makes the call asynchronous)
           the function will be passed the XMLHttpRequest object
           and an object with an id property assigned the id 
           of the statement
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#sendStatement-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#sendStatement-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="sendStatement-example-0">
                                            <pre><code class="language-javascript">// Send Statement
var stmt = {&quot;actor&quot; : {&quot;mbox&quot; : &quot;mailto:tom@example.com&quot;},
            &quot;verb&quot; : {&quot;id&quot; : &quot;http://adlnet.gov/expapi/verbs/answered&quot;,
                      &quot;display&quot; : {&quot;en-US&quot; : &quot;answered&quot;}},
            &quot;object&quot; : {&quot;id&quot; : &quot;http://adlnet.gov/expapi/activities/question&quot;}};
var resp_obj = ADL.XAPIWrapper.sendStatement(stmt);
ADL.XAPIWrapper.log(&quot;[&quot; + resp_obj.id + &quot;]: &quot; + resp_obj.xhr.status + &quot; - &quot; + resp_obj.xhr.statusText);
&gt;&gt; [3e616d1c-5394-42dc-a3aa-29414f8f0dfe]: 204 - NO CONTENT

// Send Statement with Callback
var stmt = {&quot;actor&quot; : {&quot;mbox&quot; : &quot;mailto:tom@example.com&quot;},
            &quot;verb&quot; : {&quot;id&quot; : &quot;http://adlnet.gov/expapi/verbs/answered&quot;,
                      &quot;display&quot; : {&quot;en-US&quot; : &quot;answered&quot;}},
            &quot;object&quot; : {&quot;id&quot; : &quot;http://adlnet.gov/expapi/activities/question&quot;}};
ADL.XAPIWrapper.sendStatement(stmt, function(resp, obj){  
    ADL.XAPIWrapper.log(&quot;[&quot; + obj.id + &quot;]: &quot; + resp.status + &quot; - &quot; + resp.statusText);});
&gt;&gt; [4edfe763-8b84-41f1-a355-78b7601a6fe8]: 204 - NO CONTENT</code></pre>
                                        </div>
                                        <div class="tab-pane" id="sendStatement-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.sendStatement = function(stmt, callback) 
    {
        if (this.testConfig())
        {
            this.prepareStatement(stmt);
            var id;
            if (stmt[&#x27;id&#x27;])
            {
                id = stmt[&#x27;id&#x27;];
            }
            else
            {
                id = ADL.ruuid();
                stmt[&#x27;id&#x27;] = id;
            }
            var resp = ADL.XHR_request(this.lrs, this.lrs.endpoint+&quot;statements&quot;, 
                &quot;POST&quot;, JSON.stringify(stmt), this.lrs.auth, callback, {&quot;id&quot;:id});
            if (!callback)
                return {&quot;xhr&quot;:resp,
                        &quot;id&quot; :id};
        }
    };</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-sendStatements">


                                <h3>
                                    sendStatements
                                    <em> (stmtArray, callback)</em>
                                </h3>

                                <div class="block">

                                    <p>@function sendStatements</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>stmtArray</em></td>
                                                <td><span class="label label-primary">array</span></td>
                                                <td>
                                                    the list of statement objects to send
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">function</span></td>
                                                <td>
                                                    function to be called after the LRS responds             to this request (makes the call asynchronous)
           the function will be passed the XMLHttpRequest object
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#sendStatements-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#sendStatements-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="sendStatements-example-0">
                                            <pre><code class="language-javascript">var stmt = {&quot;actor&quot; : {&quot;mbox&quot; : &quot;mailto:tom@example.com&quot;},
            &quot;verb&quot; : {&quot;id&quot; : &quot;http://adlnet.gov/expapi/verbs/answered&quot;,
                      &quot;display&quot; : {&quot;en-US&quot; : &quot;answered&quot;}},
            &quot;object&quot; : {&quot;id&quot; : &quot;http://adlnet.gov/expapi/activities/question&quot;}};
var resp_obj = ADL.XAPIWrapper.sendStatement(stmt);
ADL.XAPIWrapper.getStatements({&quot;statementId&quot;:resp_obj.id});
&gt;&gt; {&quot;version&quot;: &quot;1.0.0&quot;, 
    &quot;timestamp&quot;: &quot;2013-09-09 21:36:40.185841+00:00&quot;, 
    &quot;object&quot;: {&quot;id&quot;: &quot;http://adlnet.gov/expapi/activities/question&quot;, &quot;objectType&quot;: &quot;Activity&quot;}, 
    &quot;actor&quot;: {&quot;mbox&quot;: &quot;mailto:tom@example.com&quot;, &quot;name&quot;: &quot;tom creighton&quot;, &quot;objectType&quot;: &quot;Agent&quot;}, 
    &quot;stored&quot;: &quot;2013-09-09 21:36:40.186124+00:00&quot;, 
    &quot;verb&quot;: {&quot;id&quot;: &quot;http://adlnet.gov/expapi/verbs/answered&quot;, &quot;display&quot;: {&quot;en-US&quot;: &quot;answered&quot;}}, 
    &quot;authority&quot;: {&quot;mbox&quot;: &quot;mailto:tom@adlnet.gov&quot;, &quot;name&quot;: &quot;tom&quot;, &quot;objectType&quot;: &quot;Agent&quot;}, 
    &quot;context&quot;: {&quot;registration&quot;: &quot;51a6f860-1997-11e3-8ffd-0800200c9a66&quot;}, 
    &quot;id&quot;: &quot;ea9c1d01-0606-4ec7-8e5d-20f87b1211ed&quot;}</code></pre>
                                        </div>
                                        <div class="tab-pane" id="sendStatements-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.sendStatements = function(stmtArray, callback) 
    {
        if (this.testConfig())
        {
            for(var i in stmtArray)
            {
                this.prepareStatement(stmtArray[i]);
            }
            var resp = ADL.XHR_request(this.lrs,this.lrs.endpoint+&quot;statements&quot;, 
                &quot;POST&quot;, JSON.stringify(stmtArray), this.lrs.auth, callback);
            if (!callback)
            {
                return resp;
            }
        }
    };</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-getStatements">


                                <h3>
                                    getStatements
                                    <em> (searchparams, more, callback)</em>
                                </h3>

                                <div class="block">

                                    <p>@function getStatements</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>searchparams</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    an ADL.XAPIWrapper.searchParams object of                 key(search parameter)-value(parameter value) pairs. 
               Example:
                 var myparams = ADL.XAPIWrapper.searchParams();
                 myparams['verb'] = ADL.verbs.completed.id;
                 var completedStmts = ADL.XAPIWrapper.getStatements(myparams);
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>more</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the more url found in the StatementResults object, if there are more         statements available based on your get statements request. Pass the 
       more url as this parameter to retrieve those statements.
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">function</span></td>
                                                <td>
                                                    - function to be called after the LRS responds             to this request (makes the call asynchronous)
           * the function will be passed the XMLHttpRequest object
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#getStatements-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#getStatements-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="getStatements-example-0">
                                            <pre><code class="language-javascript">var ret = ADL.XAPIWrapper.getStatements();
if (ret)
    ADL.XAPIWrapper.log(ret.statements);

&gt;&gt; &lt;Array of statements&gt;</code></pre>
                                        </div>
                                        <div class="tab-pane" id="getStatements-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.getStatements = function(searchparams, more, callback) 
    {
        if (this.testConfig())
        {    
            var url = this.lrs.endpoint + &quot;statements&quot;;
            if (more)
            {
                url = this.base + more;
            }
            else
            {
                var urlparams = new Array();

                for (s in searchparams)
                {
                    urlparams.push(s + &quot;=&quot; + encodeURIComponent(searchparams[s]));
                }
                if (urlparams.length &gt; 0)
                    url = url + &quot;?&quot; + urlparams.join(&quot;&amp;&quot;);
            }

            var res = ADL.XHR_request(this.lrs,url, &quot;GET&quot;, null, this.lrs.auth, callback);
            if(res === undefined || res.status == 404)
            {
                return null
            }
            
            try
            {
                return JSON.parse(res.response);
            }
            catch(e)
            {
                return res.response;
            }
        }
    };</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-getActivities">


                                <h3>
                                    getActivities
                                    <em> (activityid, callback)</em>
                                </h3>

                                <div class="block">

                                    <p>@function getActivities</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>activityid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the id of the Activity to get
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">function</span></td>
                                                <td>
                                                    function to be called after the LRS responds             to this request (makes the call asynchronous)
           * the function will be passed the XMLHttpRequest object
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#getActivities-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#getActivities-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="getActivities-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="getActivities-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.getActivities = function(activityid, callback)
    {
        if (this.testConfig())
        {
            var url = this.lrs.endpoint + &quot;activities?activityId=&lt;activityid&gt;&quot;;
            url = url.replace(&#x27;&lt;activityid&gt;&#x27;, encodeURIComponent(activityid));

            var result = ADL.XHR_request(this.lrs, url, &quot;GET&quot;, null, this.lrs.auth, callback, null, true);
            
            if(result === undefined || result.status == 404)
            {
                return null
            }
            
            try
            {
                return JSON.parse(result.response);
            }
            catch(e)
            {
                return result.response;
            }
        }
    };</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-sendState">


                                <h3>
                                    sendState
                                    <em> (activityid, agent, stateid, registration, stateval, matchHash, noneMatchHash, callback)</em>
                                </h3>

                                <div class="block">

                                    <p>@function sendState</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>activityid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the id of the Activity this state is about
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>agent</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    the agent this Activity state is related to 
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>stateid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the id you want associated with this state
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>registration</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the registraton id associated with this state
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>stateval</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the state
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>matchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the hash of the state to replace or * to replace any
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>noneMatchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the hash of the current state or * to indicate no previous state
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">function</span></td>
                                                <td>
                                                    function to be called after the LRS responds             to this request (makes the call asynchronous)
           * the function will be passed the XMLHttpRequest object
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#sendState-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#sendState-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="sendState-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="sendState-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.sendState = function(activityid, agent, stateid, registration, stateval, matchHash, noneMatchHash, callback)
    {
        if (this.testConfig())
        {
            var url = this.lrs.endpoint + &quot;activities/state?activityId=&lt;activity ID&gt;&amp;agent=&lt;agent&gt;&amp;stateId=&lt;stateid&gt;&quot;;
        
            url = url.replace(&#x27;&lt;activity ID&gt;&#x27;,encodeURIComponent(activityid));
            url = url.replace(&#x27;&lt;agent&gt;&#x27;,encodeURIComponent(JSON.stringify(agent)));
            url = url.replace(&#x27;&lt;stateid&gt;&#x27;,encodeURIComponent(stateid));

            if (registration) 
            {
                url += &quot;&amp;registration=&quot; + encodeURIComponent(registration);
            }

            var headers = null;
            if(matchHash &amp;&amp; noneMatchHash)
            {
                log(&quot;Can&#x27;t have both If-Match and If-None-Match&quot;);
            }
            else if (matchHash)
            {
                headers = {&quot;If-Match&quot;:&#x27;&quot;&#x27;+matchHash+&#x27;&quot;&#x27;};
            }
            else if (noneMatchHash)
            {
                headers = {&quot;If-None-Match&quot;:&#x27;&quot;&#x27;+noneMatchHash+&#x27;&quot;&#x27;};
            }

            var method = &quot;PUT&quot;;
            if (stateval)
            {
                if (stateval instanceof Array)
                {
                    stateval = JSON.stringify(stateval);
                    headers = headers || {};
                    headers[&quot;Content-Type&quot;] =&quot;application/json&quot;;
                }
                else if (stateval instanceof Object)
                {
                    stateval = JSON.stringify(stateval);
                    headers = headers || {};
                    headers[&quot;Content-Type&quot;] =&quot;application/json&quot;;
                    method = &quot;POST&quot;;
                }
                else
                {
                    headers = headers || {};
                    headers[&quot;Content-Type&quot;] =&quot;application/octect-stream&quot;;
                }
            }
            else
            {
                this.log(&quot;No activity state was included.&quot;);
                return false;
            }
            //(lrs, url, method, data, auth, callback, callbackargs, ignore404, extraHeaders) 
            ADL.XHR_request(this.lrs, url, method, stateval, this.lrs.auth, callback, null, null, headers);
        }
    };</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-getState">


                                <h3>
                                    getState
                                    <em> (activityid, agent, stateid, registration, since, callback)</em>
                                </h3>

                                <div class="block">

                                    <p>@function getState</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>activityid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the id of the Activity this state is about
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>agent</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    the agent this Activity state is related to 
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>stateid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the id of the state, if not included, the response will be a list of stateids             associated with the activity and agent)
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>registration</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the registraton id associated with this state
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>since</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    date object telling the LRS to return objects newer than the date supplied
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">function</span></td>
                                                <td>
                                                    function to be called after the LRS responds             to this request (makes the call asynchronous)
           * the function will be passed the XMLHttpRequest object
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#getState-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#getState-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="getState-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="getState-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.getState = function(activityid, agent, stateid, registration, since, callback)
    {
        if (this.testConfig())
        {
            var url = this.lrs.endpoint + &quot;activities/state?activityId=&lt;activity ID&gt;&amp;agent=&lt;agent&gt;&quot;;
        
            url = url.replace(&#x27;&lt;activity ID&gt;&#x27;,encodeURIComponent(activityid));
            url = url.replace(&#x27;&lt;agent&gt;&#x27;,encodeURIComponent(JSON.stringify(agent)));
            
            if (stateid)
            {
                url += &quot;&amp;stateId=&quot; + encodeURIComponent(stateid);
            }
            
            if (registration) 
            {
                url += &quot;&amp;registration=&quot; + encodeURIComponent(registration);
            }

            if(since)
            {
                url += &#x27;&amp;since=&#x27; + encodeURIComponent(since.toISOString());
            }
            
            var result = ADL.XHR_request(this.lrs, url, &quot;GET&quot;, null, this.lrs.auth, callback, null, true);
            
            if(result === undefined || result.status == 404)
            {
                return null
            }
            
            try
            {
                return JSON.parse(result.response);
            }
            catch(e)
            {
                return result.response;
            }
        }
    };</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-deleteState">


                                <h3>
                                    deleteState
                                    <em> (activityid, agent, stateid, registration, matchHash, noneMatchHash, callback)</em>
                                </h3>

                                <div class="block">

                                    <p>@function deleteState</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>activityid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the id of the Activity this state is about
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>agent</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    the agent this Activity state is related to 
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>stateid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the id you want associated with this state
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>registration</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the registraton id associated with this state
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>matchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the hash of the state to replace or * to replace any
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>noneMatchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the hash of the current state or * to indicate no previous state
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    function to be called after the LRS responds             to this request (makes the call asynchronous)
           * the function will be passed the XMLHttpRequest object
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#deleteState-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#deleteState-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="deleteState-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="deleteState-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.deleteState = function(activityid, agent, stateid, registration, matchHash, noneMatchHash, callback)
    {
        if (this.testConfig())
        {
            var url = this.lrs.endpoint + &quot;activities/state?activityId=&lt;activity ID&gt;&amp;agent=&lt;agent&gt;&amp;stateId=&lt;stateid&gt;&quot;;
        
            url = url.replace(&#x27;&lt;activity ID&gt;&#x27;,encodeURIComponent(activityid));
            url = url.replace(&#x27;&lt;agent&gt;&#x27;,encodeURIComponent(JSON.stringify(agent)));
            url = url.replace(&#x27;&lt;stateid&gt;&#x27;,encodeURIComponent(stateid));

            if (registration) 
            {
                url += &quot;&amp;registration=&quot; + encodeURIComponent(registration);
            }

            var headers = null;
            if(matchHash &amp;&amp; noneMatchHash)
            {
                log(&quot;Can&#x27;t have both If-Match and If-None-Match&quot;);
            }
            else if (matchHash)
            {
                headers = {&quot;If-Match&quot;:&#x27;&quot;&#x27;+matchHash+&#x27;&quot;&#x27;};
            }
            else if (noneMatchHash)
            {
                headers = {&quot;If-None-Match&quot;:&#x27;&quot;&#x27;+noneMatchHash+&#x27;&quot;&#x27;};
            }

            var result = ADL.XHR_request(this.lrs, url, &quot;DELETE&quot;, null, this.lrs.auth, callback, null, headers);
            
            if(result === undefined || result.status == 404)
            {
                return null
            }
            
            try
            {
                return JSON.parse(result.response);
            }
            catch(e)
            {
                return result;
            }
        }
    };</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-sendActivityProfile">


                                <h3>
                                    sendActivityProfile
                                    <em> (activityid, profileid, profileval, matchHash, noneMatchHash, callback)</em>
                                </h3>

                                <div class="block">

                                    <p>@function sendActivityProfile</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>activityid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the id of the Activity this profile is about
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>profileid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the id you want associated with this profile
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>profileval</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the profile
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>matchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the hash of the profile to replace or * to replace any
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>noneMatchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the hash of the current profile or * to indicate no previous profile
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    function to be called after the LRS responds             to this request (makes the call asynchronous)
           * the function will be passed the XMLHttpRequest object
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#sendActivityProfile-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#sendActivityProfile-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="sendActivityProfile-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="sendActivityProfile-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.sendActivityProfile = function(activityid, profileid, profileval, matchHash, noneMatchHash, callback) 
    {
        if (this.testConfig())
        {
            var url = this.lrs.endpoint + &quot;activities/profile?activityId=&lt;activity ID&gt;&amp;profileId=&lt;profileid&gt;&quot;;
            
            url = url.replace(&#x27;&lt;activity ID&gt;&#x27;,encodeURIComponent(activityid));
            url = url.replace(&#x27;&lt;profileid&gt;&#x27;,encodeURIComponent(profileid));
            
            var headers = null;
            if(matchHash &amp;&amp; noneMatchHash)
            {
                log(&quot;Can&#x27;t have both If-Match and If-None-Match&quot;);
            }
            else if (matchHash)
            {
                headers = {&quot;If-Match&quot;:&#x27;&quot;&#x27;+matchHash+&#x27;&quot;&#x27;};
            }
            else if (noneMatchHash)
            {
                headers = {&quot;If-None-Match&quot;:&#x27;&quot;&#x27;+noneMatchHash+&#x27;&quot;&#x27;};
            }

            var method = &quot;PUT&quot;;
            if (profileval)
            {
                if (profileval instanceof Array)
                {
                    profileval = JSON.stringify(profileval);
                    headers = headers || {};
                    headers[&quot;Content-Type&quot;] =&quot;application/json&quot;;
                }
                else if (profileval instanceof Object)
                {
                    profileval = JSON.stringify(profileval);
                    headers = headers || {};
                    headers[&quot;Content-Type&quot;] =&quot;application/json&quot;;
                    method = &quot;POST&quot;;
                }
                else
                {
                    headers = headers || {};
                    headers[&quot;Content-Type&quot;] =&quot;application/octect-stream&quot;;
                }
            }
            else
            {
                this.log(&quot;No activity profile was included.&quot;);
                return false;
            }

            ADL.XHR_request(this.lrs, url, method, profileval, this.lrs.auth, callback, null, false, headers);
        }
    };</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-getActivityProfile">


                                <h3>
                                    getActivityProfile
                                    <em> (activityid, profileid, since, callback)</em>
                                </h3>

                                <div class="block">

                                    <p>@function getActivityProfile</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>activityid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the id of the Activity this profile is about
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>profileid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the id of the profile, if not included, the response will be a list of profileids               associated with the activity
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>since</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    date object telling the LRS to return objects newer than the date supplied
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">function</span></td>
                                                <td>
                                                    function to be called after the LRS responds             to this request (makes the call asynchronous)
           * the function will be passed the XMLHttpRequest object
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#getActivityProfile-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#getActivityProfile-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="getActivityProfile-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="getActivityProfile-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.getActivityProfile = function(activityid, profileid, since, callback) 
    {
        if (this.testConfig())
        {
            var url = this.lrs.endpoint + &quot;activities/profile?activityId=&lt;activity ID&gt;&quot;;
            
            url = url.replace(&#x27;&lt;activity ID&gt;&#x27;,encodeURIComponent(activityid));
            
            if (profileid)
            {
                url += &quot;&amp;profileId=&quot; + encodeURIComponent(profileid);
            }

            if(since)
            {
                url += &#x27;&amp;since=&#x27; + encodeURIComponent(since.toISOString());
            }
            
            var result = ADL.XHR_request(this.lrs, url, &quot;GET&quot;, null, this.lrs.auth, callback, null, true);
            
            if(result === undefined || result.status == 404)
            {
                return null
            }
            
            try
            {
                return JSON.parse(result.response);
            }
            catch(e)
            {
                return result.response;
            }
        }
    };</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-deleteActivityProfile">


                                <h3>
                                    deleteActivityProfile
                                    <em> (activityid, profileid, matchHash, noneMatchHash, callback)</em>
                                </h3>

                                <div class="block">

                                    <p>@function deleteActivityProfile</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>activityid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the id of the Activity this profile is about
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>profileid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the id you want associated with this profile
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>matchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the hash of the profile to replace or * to replace any
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>noneMatchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the hash of the current profile or * to indicate no previous profile
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    function to be called after the LRS responds             to this request (makes the call asynchronous)
           * the function will be passed the XMLHttpRequest object
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#deleteActivityProfile-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#deleteActivityProfile-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="deleteActivityProfile-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="deleteActivityProfile-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.deleteActivityProfile = function(activityid, profileid, matchHash, noneMatchHash, callback) 
    {
        if (this.testConfig())
        {
            var url = this.lrs.endpoint + &quot;activities/profile?activityId=&lt;activity ID&gt;&amp;profileId=&lt;profileid&gt;&quot;;
            
            url = url.replace(&#x27;&lt;activity ID&gt;&#x27;,encodeURIComponent(activityid));
            url = url.replace(&#x27;&lt;profileid&gt;&#x27;,encodeURIComponent(profileid));
            
            var headers = null;
            if(matchHash &amp;&amp; noneMatchHash)
            {
                log(&quot;Can&#x27;t have both If-Match and If-None-Match&quot;);
            }
            else if (matchHash)
            {
                headers = {&quot;If-Match&quot;:&#x27;&quot;&#x27;+matchHash+&#x27;&quot;&#x27;};
            }
            else if (noneMatchHash)
            {
                headers = {&quot;If-None-Match&quot;:&#x27;&quot;&#x27;+noneMatchHash+&#x27;&quot;&#x27;};
            }

            var result = ADL.XHR_request(this.lrs, url, &quot;DELETE&quot;, null, this.lrs.auth, callback, null, headers);
            
            if(result === undefined || result.status == 404)
            {
                return null
            }
            
            try
            {
                return JSON.parse(result.response);
            }
            catch(e)
            {
                return result;
            }
        }
    };</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-getAgents">


                                <h3>
                                    getAgents
                                    <em> (agent, callback)</em>
                                </h3>

                                <div class="block">

                                    <p>@function getAgents</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>agent</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    the agent object to get a Person
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">function</span></td>
                                                <td>
                                                    function to be called after the LRS responds             to this request (makes the call asynchronous)
           * the function will be passed the XMLHttpRequest object
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#getAgents-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#getAgents-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="getAgents-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="getAgents-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.getAgents = function(agent, callback)
    {
        if (this.testConfig())
        {
            var url = this.lrs.endpoint + &quot;agents?agent=&lt;agent&gt;&quot;;
            url = url.replace(&#x27;&lt;agent&gt;&#x27;, encodeURIComponent(JSON.stringify(agent)));

            var result = ADL.XHR_request(this.lrs, url, &quot;GET&quot;, null, this.lrs.auth, callback, null, true);
            
            if(result === undefined || result.status == 404)
            {
                return null
            }
            
            try
            {
                return JSON.parse(result.response);
            }
            catch(e)
            {
                return result.response;
            }
        }
    };</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-sendAgentProfile">


                                <h3>
                                    sendAgentProfile
                                    <em> (agent, profileid, profileval, matchHash, noneMatchHash, callback)</em>
                                </h3>

                                <div class="block">

                                    <p>@function sendAgentProfile</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>agent</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    the agent this profile is related to
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>profileid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the id you want associated with this profile
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>profileval</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the profile
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>matchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the hash of the profile to replace or * to replace any
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>noneMatchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the hash of the current profile or * to indicate no previous profile
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    function to be called after the LRS responds             to this request (makes the call asynchronous)
           * the function will be passed the XMLHttpRequest object
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#sendAgentProfile-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#sendAgentProfile-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="sendAgentProfile-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="sendAgentProfile-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.sendAgentProfile = function(agent, profileid, profileval, matchHash, noneMatchHash, callback) 
    {
        if (this.testConfig())
        {
            var url = this.lrs.endpoint + &quot;agents/profile?agent=&lt;agent&gt;&amp;profileId=&lt;profileid&gt;&quot;;
            
            url = url.replace(&#x27;&lt;agent&gt;&#x27;,encodeURIComponent(JSON.stringify(agent)));
            url = url.replace(&#x27;&lt;profileid&gt;&#x27;,encodeURIComponent(profileid));
            
            var headers = null;
            if(matchHash &amp;&amp; noneMatchHash)
            {
                log(&quot;Can&#x27;t have both If-Match and If-None-Match&quot;);
            }
            else if (matchHash)
            {
                headers = {&quot;If-Match&quot;:&#x27;&quot;&#x27;+matchHash+&#x27;&quot;&#x27;};
            }
            else if (noneMatchHash)
            {
                headers = {&quot;If-None-Match&quot;:&#x27;&quot;&#x27;+noneMatchHash+&#x27;&quot;&#x27;};
            }

            var method = &quot;PUT&quot;;
            if (profileval)
            {
                if (profileval instanceof Array)
                {
                    profileval = JSON.stringify(profileval);
                    headers = headers || {};
                    headers[&quot;Content-Type&quot;] =&quot;application/json&quot;;
                }
                else if (profileval instanceof Object)
                {
                    profileval = JSON.stringify(profileval);
                    headers = headers || {};
                    headers[&quot;Content-Type&quot;] =&quot;application/json&quot;;
                    method = &quot;POST&quot;;
                }
                else
                {
                    headers = headers || {};
                    headers[&quot;Content-Type&quot;] =&quot;application/octect-stream&quot;;
                }
            }
            else
            {
                this.log(&quot;No agent profile was included.&quot;);
                return false;
            }

            ADL.XHR_request(this.lrs, url, method, profileval, this.lrs.auth, callback, null, false, headers);
        }
    };</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-getAgentProfile">


                                <h3>
                                    getAgentProfile
                                    <em> (agent, profileid, since, callback)</em>
                                </h3>

                                <div class="block">

                                    <p>@function getAgentProfile</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>agent</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    the agent associated with this profile
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>profileid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the id of the profile, if not included, the response will be a list of profileids               associated with the agent
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>since</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    date object telling the LRS to return objects newer than the date supplied
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">function</span></td>
                                                <td>
                                                    function to be called after the LRS responds             to this request (makes the call asynchronous)
           * the function will be passed the XMLHttpRequest object
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#getAgentProfile-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#getAgentProfile-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="getAgentProfile-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="getAgentProfile-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.getAgentProfile = function(agent, profileid, since, callback) 
    {
        if (this.testConfig()){
            var url = this.lrs.endpoint + &quot;agents/profile?agent=&lt;agent&gt;&quot;;
            
            url = url.replace(&#x27;&lt;agent&gt;&#x27;,encodeURIComponent(JSON.stringify(agent)));
            url = url.replace(&#x27;&lt;profileid&gt;&#x27;,encodeURIComponent(profileid));

            if (profileid)
            {
                url += &quot;&amp;profileId=&quot; + encodeURIComponent(profileid);
            }

            if(since)
            {
                url += &#x27;&amp;since=&#x27; + encodeURIComponent(since.toISOString());
            }
            
            var result = ADL.XHR_request(this.lrs, url, &quot;GET&quot;, null, this.lrs.auth, callback, null, true);
            
            if(result === undefined || result.status == 404)
            {
                return null
            }
            
            try
            {
                return JSON.parse(result.response);
            }
            catch(e)
            {
                return result.response;
            }
        }
    };</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-deleteAgentProfile">


                                <h3>
                                    deleteAgentProfile
                                    <em> (agent, profileid, matchHash, noneMatchHash, callback)</em>
                                </h3>

                                <div class="block">

                                    <p>@function deleteAgentProfile</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>agent</em></td>
                                                <td><span class="label label-primary">oject</span></td>
                                                <td>
                                                    the id of the Agent this profile is about
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>profileid</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the id you want associated with this profile
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>matchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the hash of the profile to replace or * to replace any
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>noneMatchHash</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the hash of the current profile or * to indicate no previous profile
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    function to be called after the LRS responds             to this request (makes the call asynchronous)
           * the function will be passed the XMLHttpRequest object
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#deleteAgentProfile-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#deleteAgentProfile-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="deleteAgentProfile-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="deleteAgentProfile-source">
                                            <pre><code class="language-javascript">XAPIWrapper.prototype.deleteAgentProfile = function(agent, profileid, matchHash, noneMatchHash, callback) 
    {
        if (this.testConfig())
        {
            var url = this.lrs.endpoint + &quot;agents/profile?agent=&lt;agent&gt;&amp;profileId=&lt;profileid&gt;&quot;;
            
            url = url.replace(&#x27;&lt;agent&gt;&#x27;,encodeURIComponent(JSON.stringify(agent)));
            url = url.replace(&#x27;&lt;profileid&gt;&#x27;,encodeURIComponent(profileid));
            
            var headers = null;
            if(matchHash &amp;&amp; noneMatchHash)
            {
                log(&quot;Can&#x27;t have both If-Match and If-None-Match&quot;);
            }
            else if (matchHash)
            {
                headers = {&quot;If-Match&quot;:&#x27;&quot;&#x27;+matchHash+&#x27;&quot;&#x27;};
            }
            else if (noneMatchHash)
            {
                headers = {&quot;If-None-Match&quot;:&#x27;&quot;&#x27;+noneMatchHash+&#x27;&quot;&#x27;};
            }

            var result = ADL.XHR_request(this.lrs, url, &quot;DELETE&quot;, null, this.lrs.auth, callback, null, headers);
            
            if(result === undefined || result.status == 404)
            {
                return null
            }
            
            try
            {
                return JSON.parse(result.response);
            }
            catch(e)
            {
                return result;
            }
        }
    };</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>


                            <section id="xapiwrapper-ie_request">


                                <h3>
                                    ie_request
                                    <em> (method, url, headers, data)</em>
                                </h3>

                                <div class="block">

                                    <p>@function ie_request</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>method</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the http request method (ex: "PUT", "GET")
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>url</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the url to the request (ex: ADL.XAPIWrapper.lrs.endpoint + "statements")
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>headers</em></td>
                                                <td><span class="label label-primary">array</span></td>
                                                <td>
                                                    headers to include in the request
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>data</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the body of the request, if there is one
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#ie_request-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#ie_request-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="ie_request-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="ie_request-source">
                                            <pre><code class="language-javascript">function ie_request(method, url, headers, data)
    {
        var newUrl = url;
        
        //Everything that was on query string goes into form vars
        var formData = new Array();
        var qsIndex = newUrl.indexOf(&#x27;?&#x27;);
        if(qsIndex &gt; 0){
            formData.push(newUrl.substr(qsIndex+1));
            newUrl = newUrl.substr(0, qsIndex);
        }

        //Method has to go on querystring, and nothing else
        newUrl = newUrl + &#x27;?method=&#x27; + method;
        
        //Headers
        if(headers !== null){
            for(var headerName in headers){
                formData.push(headerName + &quot;=&quot; + encodeURIComponent(headers[headerName]));
            }
        }

        //The original data is repackaged as &quot;content&quot; form var
        if(data !== null){
            formData.push(&#x27;content=&#x27; + encodeURIComponent(data));
        }
        
        return {
            &quot;method&quot;:&quot;POST&quot;,
            &quot;url&quot;:newUrl,
            &quot;headers&quot;:{},
            &quot;data&quot;:formData.join(&quot;&amp;&quot;)
        };
    }</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>



                            <section id="xapiwrapper-XHR_request">


                                <h3>
                                    XHR_request
                                    <em> (lrs, url, method, data, auth, callback, callbackargs, ignore404, extraHeaders)</em>
                                </h3>

                                <div class="block">

                                    <p>@function XHR_request</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>lrs</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the lrs connection info, such as endpoint, auth, etc
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>url</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the url of this request
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>method</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the http request method
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>data</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the payload
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>auth</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    the value for the Authorization header
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callback</em></td>
                                                <td><span class="label label-primary">function</span></td>
                                                <td>
                                                    function to be called after the LRS responds             to this request (makes the call asynchronous)
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>callbackargs</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    additional javascript object to be passed to the callback function
                                                    <span class="label label-default">optional</span>
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>ignore404</em></td>
                                                <td><span class="label label-primary">boolean</span></td>
                                                <td>
                                                    allow page not found errors to pass
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>extraHeaders</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    other header key-values to be added to this request
                                                    
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#XHR_request-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#XHR_request-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="XHR_request-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="XHR_request-source">
                                            <pre><code class="language-javascript">ADL.XHR_request = function(lrs, url, method, data, auth, callback, callbackargs, ignore404, extraHeaders) 
    {
        &quot;use strict&quot;;
        
        var xhr,
            finished = false,
            xDomainRequest = false,
            ieXDomain = false,
            ieModeRequest,
            urlparts = url.toLowerCase().match(/^(.+):\/\/([^:\/]*):?(\d+)?(\/.*)?$/),
            location = window.location,
            urlPort,
            result,
            extended,
            prop,
            until;
 
        //Consolidate headers
        var headers = {};
        headers[&quot;Content-Type&quot;] = &quot;application/json&quot;;
        headers[&quot;Authorization&quot;] = auth;
        headers[&#x27;X-Experience-API-Version&#x27;] = ADL.XAPIWrapper.xapiVersion;
        if(extraHeaders !== null){
            for(var headerName in extraHeaders){
                headers[headerName] = extraHeaders[headerName];
            }
        }
        
        //See if this really is a cross domain
        xDomainRequest = (location.protocol.toLowerCase() !== urlparts[1] || location.hostname.toLowerCase() !== urlparts[2]);
        if (!xDomainRequest) {
            urlPort = (urlparts[3] === null ? ( urlparts[1] === &#x27;http&#x27; ? &#x27;80&#x27; : &#x27;443&#x27;) : urlparts[3]);
            xDomainRequest = (urlPort === location.port);
        }
        
        //If it&#x27;s not cross domain or we&#x27;re not using IE, use the usual XmlHttpRequest
        if (!xDomainRequest || typeof(XDomainRequest) === &#x27;undefined&#x27;) {
            xhr = new XMLHttpRequest();
            xhr.open(method, url, callback != null);
            for(var headerName in headers){
                xhr.setRequestHeader(headerName, headers[headerName]);
            }
        } 
        //Otherwise, use IE&#x27;s XDomainRequest object
        else {
            ieXDomain = true;
            ieModeRequest = ie_request(method, url, headers, data);
            xhr = new XDomainRequest();
            xhr.open(ieModeRequest.method, ieModeRequest.url);
        }
        
        //Setup request callback
        function requestComplete() {
            if(!finished){
                // may be in sync or async mode, using XMLHttpRequest or IE XDomainRequest, onreadystatechange or
                // onload or both might fire depending upon browser, just covering all bases with event hooks and
                // using &#x27;finished&#x27; flag to avoid triggering events multiple times
                finished = true;
                var notFoundOk = (ignore404 &amp;&amp; xhr.status === 404);
                if (xhr.status === undefined || (xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 400) || notFoundOk) {
                    if (callback) {
                        if(callbackargs){
                            callback(xhr, callbackargs);
                        }
                        else {
                            try {
                                var body = JSON.parse(xhr.responseText);
                                callback(xhr,body);
                            }
                            catch(e){
                                callback(xhr,xhr.responseText);
                            }
                        }
                    } else {
                        result = xhr;
                        return xhr;
                    }
                } else {
                    var warning;
                    try {
                        warning = &quot;There was a problem communicating with the Learning Record Store. ( &quot; 
                            + xhr.status + &quot; | &quot; + xhr.response+ &quot; )&quot; + url
                    } catch (ex) {
                        warning = ex.toString();
                    }
                    console.warn(warning);
                    ADL.xhrRequestOnError(xhr, method, url, callback, callbackargs);
                    //throw new Error(&quot;debugger&quot;);
                    result = xhr;
                    return xhr;
                }
            } else {
                return result;
            }
        };

        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4) {
               return requestComplete();
            }
        };

        xhr.onload = requestComplete;
        xhr.onerror = requestComplete;
        //xhr.onerror =  ADL.xhrRequestOnError(xhr, method, url);

        xhr.send(ieXDomain ? ieModeRequest.data : data);
        
        if (!callback) {
            // synchronous
            if (ieXDomain) {
                // synchronous call in IE, with no asynchronous mode available.
                until = 1000 + new Date();
                while (new Date() &lt; until &amp;&amp; xhr.readyState !== 4 &amp;&amp; !finished) {
                    delay();
                }
            }
            return requestComplete();
        }
    };</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>

                            <section id="xapiwrapper-xhrRequestOnError">


                                <h3>
                                    xhrRequestOnError
                                    <em> (xhr, method, url)</em>
                                </h3>

                                <div class="block">

                                    <p>@function xhrRequestOnError</p>

                                    <table class="table table-condensed">
                                        <thead>
                                            <tr>
                                                <th colspan="3">Arguments</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><em>xhr</em></td>
                                                <td><span class="label label-primary">object</span></td>
                                                <td>
                                                    xhr object or null
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>method</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    XMLHttpRequest request method
                                                    
                                                    

                                                </td>
                                            </tr>
                                            <tr>
                                                <td><em>url</em></td>
                                                <td><span class="label label-primary">string</span></td>
                                                <td>
                                                    full endpoint url
                                                    
                                                    

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <ul class="nav nav-tabs">
                                        <li class="active"><a href="#xhrRequestOnError-example-0" data-toggle="tab">Example</a></li>
                                        <li>
                                            <a href="#xhrRequestOnError-source" data-toggle="tab">Source</a>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="active tab-pane" id="xhrRequestOnError-example-0">
                                            <pre><code class="language-javascript">// Sorry, no example available.</code></pre>
                                        </div>
                                        <div class="tab-pane" id="xhrRequestOnError-source">
                                            <pre><code class="language-javascript">ADL.xhrRequestOnError = function(xhr, method, url, callback, callbackargs){};

    ADL.XAPIWrapper = new XAPIWrapper(Config, false);

}(window.ADL = window.ADL || {}));</code></pre>
                                        </div>
                                    </div>

                                </div>
                            </section>
                    </section>
            </div>
        </div>
        <script src="static/domtastic.min.js"></script>
        <script>
            $('.content').on('click', '.nav-tabs a', function(event) {

                event.preventDefault();

                var tabContainer = $(event.target).closest('.nav-tabs'),
                        tabs = tabContainer.find('li'),
                        tabsContent = tabContainer.parent().find('.tab-pane'),
                        index = tabContainer.find('a').indexOf(event.target);

                tabs.removeClass('active').eq(index).addClass('active');
                tabsContent.removeClass('active').eq(index).addClass('active');

            });
        </script>
        <script src="static/prism.js"></script>
    </body>
</html>
